/* Copyright 2021 KiwiKey
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

#include "soflergb.h"

#ifdef SWAP_HANDS_ENABLE
__attribute__ ((weak))
const keypos_t hand_swap_config[MATRIX_ROWS][MATRIX_COLS] = {
	// Left
	{{0, 5}, {1, 5}, {2, 5}, {3, 5}, {4, 5}, {5, 5}},
	{{0, 6}, {1, 6}, {2, 6}, {3, 6}, {4, 6}, {5, 6}},
	{{0, 7}, {1, 7}, {2, 7}, {3, 7}, {4, 7}, {5, 7}},
	{{0, 8}, {1, 8}, {2, 8}, {3, 8}, {4, 8}, {5, 8}},
	{{0, 9}, {1, 9}, {2, 9}, {3, 9}, {4, 9}, {5, 9}},
	// Right
	{{0, 0}, {1, 0}, {2, 0}, {3, 0}, {4, 0}, {5, 0}},
	{{0, 1}, {1, 1}, {2, 1}, {3, 1}, {4, 1}, {5, 1}},
	{{0, 2}, {1, 2}, {2, 2}, {3, 2}, {4, 2}, {5, 2}},
	{{0, 3}, {1, 3}, {2, 3}, {3, 3}, {4, 3}, {5, 3}},
	{{0, 4}, {1, 4}, {2, 4}, {3, 4}, {4, 4}, {5, 4}}
};
#endif

#ifdef RGB_MATRIX_ENABLE

led_config_t g_led_config = { {
	  // Key Matrix to LED Index
	{	15,	14,	13,	12,	11,	10	},
	{	21,	20,	19,	18,	17,	16	},
	{	27,	26,	25,	24,	23,	22	},
	{	33,	32,	31,	30,	29,	28	},
	{	39,	38,	37,	36,	35,	34	},

	{	50,	51, 52,	53,	54,	55	},
	{	56,	57, 58,	59,	60,	61	},
	{	62,	63, 64,	65,	66,	67	},
	{	68,	69, 70,	71, 72, 73	},
	{	74, 75, 76, 77, 78, 79	}
}, {
  // LED Index to Physical Position
	{95, 7}, 	{70, 7}, 	{39, 8}, 	{9, 9},   {7, 24},    {9, 40},   {36, 41}, 	{58, 41}, 	{87, 44}, 	{93, 24},

	{80, 8}, 	{64, 7}, 	{48, 6}, 	{33, 7}, 	{16, 10}, 	{0, 11},
	{80, 19}, 	{64, 17}, 	{48, 16}, 	{33, 17}, 	{16, 20}, 	{0, 21},
	{80, 29}, 	{64, 28}, 	{48, 27}, 	{33, 28}, 	{16, 31}, 	{0, 32},
	{80, 40}, 	{64, 38}, 	{48, 37}, 	{33, 38}, 	{16, 41}, 	{0, 42},
	{93, 35}, 	{96, 51}, 	{73, 50}, 	{56, 49}, 	{40, 49}, 	{25,51},

	{131, 7}, 	{155, 7}, 	{186, 8}, 	{217, 9}, 	{218, 24},  {217, 40}, 	{190, 41}, 	{166, 41}, 	{138, 44}, 	{133, 24}, 

	{145, 8}, 	{162, 7}, 	{177, 6}, 	{193, 7}, 	{209, 10}, 	{224, 11}, 
	{145, 19}, 	{162, 17}, 	{177, 16}, 	{193, 17}, 	{209, 20}, 	{224, 21}, 
	{145, 29}, 	{162, 28}, 	{177, 27}, 	{193, 28}, 	{209, 31}, 	{224, 32}, 
	{145, 40}, 	{162, 38}, 	{177, 37}, 	{193, 38}, 	{209, 41}, 	{224, 42}, 
	{132, 35}, 	{129, 51}, 	{152, 50}, 	{169, 49}, 	{185, 49}, 	{202, 51}

}, {
    2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
	4, 4, 4, 4, 4, 4,
	4, 4, 4, 4, 4, 4,
	4, 4, 4, 4, 4, 4,
	4, 4, 4, 4, 4, 4,
	4, 4, 4, 4, 4, 4,
	2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
	4, 4, 4, 4, 4, 4,
	4, 4, 4, 4, 4, 4,
	4, 4, 4, 4, 4, 4,
	4, 4, 4, 4, 4, 4,
	4, 4, 4, 4, 4, 4
} };
#endif

void matrix_init_kb(void) {

#if defined(RGB_MATRIX_ENABLE) && !defined(RGB_MATRIX_SPLIT)
    if (!is_keyboard_master()) {
        g_led_config = (led_config_t){ {
			{	50,	51, 52,	53,	54,	55	},
			{	56,	57, 58,	59,	60,	61	},
			{	62,	63, 64,	65,	66,	67	},
			{	68,	69, 70,	71, 72, 73	},
			{	74, 75, 76, 77, 78, 79	},
			
			{	15,	14,	13,	12,	11,	10	},
			{	21,	20,	19,	18,	17,	16	},
			{	27,	26,	25,	24,	23,	22	},
			{	33,	32,	31,	30,	29,	28	},
			{	39,	38,	37,	36,	35,	34	}
        }, {
			{131, 7}, 	{155, 7}, 	{186, 8}, 	{217, 9}, 	{218, 24},  {217, 40}, 	{190, 41}, 	{166, 41}, 	{138, 44}, 	{133, 24},
			{145, 8}, 	{162, 7}, 	{177, 6}, 	{193, 7}, 	{209, 10}, 	{224, 11}, 
			{145, 19}, 	{162, 17}, 	{177, 16}, 	{193, 17}, 	{209, 20}, 	{224, 21}, 
			{145, 29}, 	{162, 28}, 	{177, 27}, 	{193, 28}, 	{209, 31}, 	{224, 32}, 
			{145, 40}, 	{162, 38}, 	{177, 37}, 	{193, 38}, 	{209, 41}, 	{224, 42}, 
			{132, 35}, 	{129, 51}, 	{152, 50}, 	{169, 49}, 	{185, 49}, 	{202, 51},			
			{95, 7}, 	{70, 7}, 	{39, 8}, 	{9, 9},   {7, 24},    {9, 40},   {36, 41}, 	{58, 41}, 	{87, 44}, 	{93, 24},			
			{80, 8}, 	{64, 7}, 	{48, 6}, 	{33, 7}, 	{16, 10}, 	{0, 11},
			{80, 19}, 	{64, 17}, 	{48, 16}, 	{33, 17}, 	{16, 20}, 	{0, 21},
			{80, 29}, 	{64, 28}, 	{48, 27}, 	{33, 28}, 	{16, 31}, 	{0, 32},
			{80, 40}, 	{64, 38}, 	{48, 37}, 	{33, 38}, 	{16, 41}, 	{0, 42},
			{93, 35}, 	{96, 51}, 	{73, 51}, 	{56, 49}, 	{40, 49}, 	{25,51}
        }, {			
			2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
			4, 4, 4, 4, 4, 4,
			4, 4, 4, 4, 4, 4,
			4, 4, 4, 4, 4, 4,
			4, 4, 4, 4, 4, 4,
			4, 4, 4, 4, 4, 4,
			2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
			4, 4, 4, 4, 4, 4,
			4, 4, 4, 4, 4, 4,
			4, 4, 4, 4, 4, 4,
			4, 4, 4, 4, 4, 4,
			4, 4, 4, 4, 4, 4
        } };			
    }
#endif
    matrix_init_user();
}

#ifdef SSD1306OLED
bool process_record_kb(uint16_t keycode, keyrecord_t *record) {
  return process_record_gfx(keycode,record) && process_record_user(keycode, record);
}
#endif
